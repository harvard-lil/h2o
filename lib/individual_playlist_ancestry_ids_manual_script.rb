# use sort & uniq heavily

playlist_ids = [66, 603, 633, 711, 986, 1324, 1324, 1369, 1510, 1844, 1844, 1862, 1889, 1923, 1923, 1995, 3762, 3762, 5094, 5143, 5555, 5555, 5804, 5866, 5876, 7072, 7337, 7337, 7384, 7390, 7399, 7446, 7446, 8624, 8770, 8770, 9141, 9156, 9157, 9267, 9267, 9364, 9504, 9623, 10007, 10007, 10033, 10065, 10236, 10237, 10572, 10609, 11114, 11114, 11492, 11800, 12489, 12716, 12826, 12864, 12865, 12922, 13023, 13034, 13086, 14454, 17803, 19763, 20336, 20370, 20406, 20443, 20493, 20630, 20630, 20861, 21225, 21225, 21529, 21529, 21898, 21913, 22180, 22188, 22189, 22235, 22269, 22363, 22368, 22568, 24353, 24419, 24704, 24739, 24739, 25022, 25421, 25606, 25698, 25965, 26039, 26057, 26074, 26143, 26147, 26147, 26147, 26221, 26221, 26241, 26271, 26372, 26401, 26452, 26559, 27297, 27438, 27790, 27819, 27845, 28015, 28148, 28286, 50966, 51028, 51291, 51531, 51575, 51676, 51703, 51759, 51760, 51770, 51792, 51938, 51938, 51971, 52383, 52511, 52719]

all_ancestry = []

playlist_ids.each do |playlist_id|
  playlist = Migrate::Playlist.find(playlist_id)
  all_ancestry << playlist.ancestry
end

all_ancestry = ["1162", "1162", "671", "", "1374", "385/911/5526", "945", "945/10065", "945/10065/10572", "945/10065/10572", "945/10065/10572", "5876", "945/10065/10572/10609", "671/5804/12668", "945/10065/12622", "945/10065/12622/12922", "945/10065/10572", "7384", "11800", "945/10065/12622/12922/14454", "945/10065/12622/12922/14454", "945/10065/12622/12922/14454", "945/10065/12622/12922/14454", "1995", "1510", "9504", "5876/12489", "986", "19763", "385/911/5526/10033", "385/911/5526/10033", "945/10065", "986/22368", "986", "986/25421/25514", "986/25421", "945/10065/10572/17803", "945/10065/10572", "986/25421", "671/5804/12668/12826", "671/5804/12668/12826", "5876/12489/22235", "945/10065/10572", "945/10065/12622/12922", "7384/20406", "671/1090", "11492", "46180", "1923", "671/5804/12668/12826/26147", "671/5804/12668/12826/26147", "46180", "5876/12489/22235", "27206", "406/944/5551/25858", "945/10065/12622/12922", "51770", "986/25421/26074", "21625/28066", "671/5804/12668/12826"]

all_ancestry_ids = []

all_ancestry.each do |ancestry|
  all_ancestry_ids << ancestry.split("/")
end

all_ancestry_ids = ["10033", "10033", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10065", "10572", "10572", "10572", "10572", "10572", "10572", "10572", "10572", "10609", "1090", "11492", "1162", "1162", "11800", "12489", "12489", "12489", "12622", "12622", "12622", "12622", "12622", "12622", "12622", "12622", "12668", "12668", "12668", "12668", "12668", "12668", "12826", "12826", "12826", "12826", "12826", "12922", "12922", "12922", "12922", "12922", "12922", "12922", "1374", "14454", "14454", "14454", "14454", "1510", "17803", "1923", "19763", "1995", "20406", "21625", "22235", "22235", "22368", "25421", "25421", "25421", "25421", "25514", "25858", "26074", "26147", "26147", "27206", "28066", "385", "385", "385", "406", "46180", "46180", "51770", "5526", "5526", "5526", "5551", "5804", "5804", "5804", "5804", "5804", "5804", "5876", "5876", "5876", "5876", "671", "671", "671", "671", "671", "671", "671", "671", "7384", "7384", "911", "911", "911", "944", "945", "945", "945", "945", "945", "945", "945", "945", "945", "945", "945", "945", "945", "945", "945", "945", "945", "945", "945", "9504", "986", "986", "986", "986", "986", "986", "986"]

all_ancestry_ids_number = []

all_ancestry_ids.each do |id|
  all_ancestry_ids_number << id.to_i
end

all_ancestry_ids_number = [385, 406, 671, 911, 944, 945, 986, 1090, 1162, 1374, 1510, 1923, 1995, 5526, 5551, 5804, 5876, 7384, 9504, 10033, 10065, 10572, 10609, 11492, 11800, 12489, 12622, 12668, 12826, 12922, 14454, 17803, 19763, 20406, 21625, 22235, 22368, 25421, 25514, 25858, 26074, 26147, 27206, 28066, 46180, 51770]

playlist_and_ancestry_ids = [66, 385, 406, 603, 633, 671, 711, 911, 944, 945, 986, 1090, 1162, 1324, 1369, 1374, 1510, 1844, 1862, 1889, 1923, 1995, 3762, 5094, 5143, 5526, 5551, 5555, 5804, 5866, 5876, 7072, 7337, 7384, 7390, 7399, 7446, 8624, 8770, 9141, 9156, 9157, 9267, 9364, 9504, 9623, 10007, 10033, 10065, 10236, 10237, 10572, 10609, 11114, 11492, 11800, 12489, 12716, 12826, 12864, 12865, 12922, 13023, 13034, 13086, 14454, 17803, 19763, 20336, 20370, 20406, 20443, 20493, 20630, 20861, 21225, 21529, 21625, 21898, 21913, 22180, 22188, 22189, 22235, 22269, 22363, 22368, 22568, 24353, 24419, 24704, 24739, 25022, 25421, 25514, 25606, 25698, 25858, 25965, 26039, 26057, 26074, 26143, 26147, 26221, 26241, 26271, 26372, 26401, 26452, 26559, 27206, 27297, 27438, 27790, 27819, 27845, 28015, 28066, 28148, 28286, 46180, 50966, 51028, 51291, 51531, 51575, 51676, 51703, 51759, 51760, 51770, 51792, 51938, 51971, 52383, 52511, 52719]


25421 is the last migrated one! 

playlist_and_ancestry_ids.each do |id|
  if ! Migrate::Playlist.find(id).present?
    puts id
  end
end

Before migrating
Migrate::PlaylistItem.find(2445).destroy

After migrating manually change ancestries with these numbers: 
***** 12622 | 12668 

PlaylistItems

Migrate::Playlist.find(playlist_and_ancestry_ids).map &:migrate