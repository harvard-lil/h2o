(function(e){function t(t){for(var o,r,c=t[0],l=t[1],s=t[2],u=0,f=[];u<c.length;u++)r=c[u],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&f.push(a[r][0]),a[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);d&&d(t);while(f.length)f.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],o=!0,c=1;c<n.length;c++){var l=n[c];0!==a[l]&&(o=!1)}o&&(i.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},a={rich_text_editor:0},i=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/static/dist/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var d=l;i.push([1,"chunk-vendors"]),n()})({1:function(e,t,n){e.exports=n("f872")},1123:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));n("b0c0"),n("4de4"),n("d3b7"),n("498a"),n("159b"),n("ddb0"),n("99af"),n("a15b"),n("d81d");var o=n("67c4"),a=n("2ef0"),i=n.n(a),r=n("11c1"),c=n.n(r),l="Image description";function s(e,t,n,a){var i={onUploadProgress:function(e){a(Math.round(e.loaded/e.total*100))}},r=new FormData;r.append("image",e.blob(),e.filename()),r.append("name",e.name()),o["a"].post("/image/",r,i).then((function(e){t(e.data.location)}),(function(e){return n(e,{remove:!0})}))}function d(e){for(var t=e.getDoc().getElementsByTagName("IMG"),n=0;n<t.length;n++){var o=t[n];if(!o.alt)return o}return null}function u(e){var t=e;e.ui.registry.addToggleButton("checkAlly",{text:"Check Accessibility",classes:"a11y-check",onSetup:function(n){function o(){var t=!!d(e);t?(n.setActive(t),n.setDisabled(!1)):(n.setActive(!1),n.setDisabled(!0))}var a=t.on("Dirty",o),i=t.on("change",o);return function(){t.off("Dirty",a),t.off("change",i)}},onAction:function(){var n=d(e);n&&t.execCommand("mceSelectNode",!1,n)}})}function f(e){function t(e){return"img"===e.nodeName.toLowerCase()}e.ui.registry.addContextForm("image-alt",{launch:{type:"contextformtogglebutton",icon:"accessibility-check"},label:"description",predicate:t,position:"node",initValue:function(t){return e.selection.getNode().alt||l},commands:[{type:"contextformtogglebutton",tooltip:"Save",icon:"save",primary:!0,onAction:function(t){var n=t.getValue();n!==l&&(e.selection.getNode().alt=n,e.setDirty(!1),e.setDirty(!0)),t.hide()}},{type:"contextformtogglebutton",icon:"image",tooltip:"More image options",active:!0,onAction:function(t){t.hide(),e.execCommand("mceImage")}}]})}function m(e){function t(e){return e.classList.contains("footnote")}function n(t){var n=e.dom.get("footnote-".concat(t,"-ref")),o=e.dom.get("footnote-".concat(t));return{refNode:n,bodyNode:o}}function o(){for(var t=e.dom.$(".footnote").filter((function(e,t){return!t.classList.contains("footnote-footer")})),n=[],o=[],a=0;a<t.length;a++){var r=t[a],c=d(r);if(r.classList.contains("footnote-ref")){var l=r.innerText;n.push({id:c,candidate:r,mark:l})}else if(r.classList.contains("footnote-body")){var s=r.getElementsByClassName("footnote-label"),u=void 0;s&&0!=s.length?(u=s[0].innerText,o.push({id:c,candidate:r,mark:u})):""!==r.innerText.trim()&&(u="",o.push({id:c,candidate:r,mark:u}))}}var f=i.a.chain(n).groupBy("id").mapValues((function(e){return e[0]})).value(),m=i.a.chain(o).groupBy("id").mapValues((function(e){return e[0]})).value(),p=i.a.differenceBy(n,o,"id"),g=i.a.differenceBy(o,n,"id");p.forEach((function(t){var n=t.id,o=t.candidate;e.dom.remove(o),i.a.unset(f,n)})),g.forEach((function(t){var n=t.id,o=t.candidate;e.dom.remove(o),i.a.unset(m,n)})),i.a.values(f).forEach((function(t){var n=t.id,o=t.mark,a=(t.candidate,m[n].mark);if(o!==a){var i=m[n].candidate,r=i.getElementsByClassName("footnote-label");r&&0!=r.length?r[0].innerText=o:i.firstChild&&(r=e.dom.createFragment('<span class="footnote-label" data-extra-export-offset="2">'.concat(o,"</span>")),i.firstChild.prepend(r))}}));for(var v=e.dom.$(".footnote-label"),h=[],b=0;b<v.length;b++)h.push(v[b]);h.forEach((function(t){var n=t;while(n){if(n.classList.contains("footnote-footer"))return;n=n.parentElement}e.dom.remove(t)})),v=e.dom.$(".footnote-label"),h=[];for(var y=0;y<v.length;y++)h.push(v[y]);if(h.forEach((function(t){var n=t.parentElement.innerText;if(n.trim()==t.innerText){var o=document.createTextNode(" ");t.parentElement.appendChild(o),e.selection.setCursorLocation(t.parentElement,n.length)}})),e.selection.getStart()==e.selection.getEnd()&&e.selection.getStart().classList.contains("footnote-label")){var x=e.selection.getStart();e.selection.setCursorLocation(x.parentElement,x.innerText.length)}var k=e.dom.$(".footnote-footer");1===k.length&&(k=k[0],k!==k.parentElement.lastElementChild&&k.parentElement.appendChild(k))}function a(){var t=e.dom.$(".footnote-footer");if(1==t.length)return t[0];if(t.length>1)return console.error("Multiple footers present."),null;var n=e.dom.add(e.getBody(),"div",{class:"footnote footnote-footer"},"");return n}function r(t){t.id=c()();var n='<span class="footnote footnote-ref" data-custom-style="Footnote Reference" id="footnote-'.concat(t.id,'-ref">').concat(t.mark,"</span>"),o=e.dom.createFragment('<div class="footnote footnote-body" id="footnote-'.concat(t.id,'"><p><span class="footnote-label" data-extra-export-offset="2" data-custom-style="Footnote Text" contenteditable="false">').concat(t.mark,"</span>").concat(t.footnote,"</p></div>")),i=a();i.appendChild(o),e.execCommand("mceInsertContent",!1,n)}function l(t){var o=n(t.id),a=o.refNode,i=o.bodyNode;a.innerText=t.mark;var r=e.dom.createFragment('<p><span class="footnote-label" data-extra-export-offset="2" data-custom-style="Footnote Text" contenteditable="false">'.concat(t.mark,"</span>").concat(t.footnote,"</p>"));while(i.firstChild)i.firstChild.remove();i.appendChild(r)}function s(e){var t=n(e),o=t.refNode,a=t.bodyNode,i=o.innerText,r=a.firstChild.firstChild.innerText,c=a.innerText.substr(r.length).trim();return{mark:i,footnote:c,id:e}}function d(e){var t=e.id||e.parentElement.id;return t?t.substr(9,36):null}function u(){var o=e.selection.getNode(),a=t(o),i=e.dom.$(".footnote-ref").length+1,c={mark:""+i,footnote:""};if(a){var u=d(o);c=s(u)}e.windowManager.open({title:"Footnote",size:"normal",body:{type:"panel",items:[{label:"Mark",type:"input",name:"mark"},{label:"Footnote",type:"textarea",name:"footnote",multiline:!0,minWidth:520,minHeight:100}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0},{type:"custom",name:"delete",text:"Delete"}],initialData:c,onSubmit:function(e){var t=e.getData();a?(t.id=c.id,l(t)):r(t),e.close()},onCancel:function(e){e.close()},onAction:function(e,t){if(t&&"delete"==t.name){var o=n(c.id),a=o.refNode,i=o.bodyNode;a.remove(),i.remove()}e.close()}})}var f={open:u};e.ui.registry.addToggleButton("footnote",{text:"Footnote",tooltip:"Footnote",onAction:function(){return e.execCommand("openFootnote")}}),e.ui.registry.addMenuItem("footnote",{text:"Footnote",onAction:function(){return e.execCommand("openFootnote")}}),e.addCommand("openFootnote",(function(){f.open(e)})),e.on("NodeChange",(function(e){o()}))}function p(e,t,n){var o='img[alt=""] {outline: 4px solid red;}.footnote-ref {font-size: 16px;vertical-align: super;}.footnote-body {margin-left: 2rem;}.footnote-label {float:left;margin-left:-1rem;} .footnote-label::after{content: ".";} .footnote-footer {border-top: 1px solid black;clear:both;}.image-center-large{width:80%;object-fit:contain;margin:0auto;display:block;}.image-center-medium{width:50%;object-fit:contain;margin:0 auto;display:block;}.image-left-medium{width:50%;object-fit:contain;margin:0 2rem;float:left;display:block;}.image-right-medium{width:50%;object-fit:contain;margin:0 2rem;float:right;display:block;}',a=["link","lists","image","table","paste"],i="undo redo removeformat | styleselect | h1 h2 | bold italic underline | numlist bullist indent outdent | table blockquote link image removeformat";t&&(i+=" media footnote | checkAlly",a.push("media")),n&&(a.push("code"),i+=" | code");var r=[["div",["class","title","style","tabindex","id","class","data-custom-style"]],["span",["class","title","style","tabindex","id","class","data-custom-style"],["img",["class","alt","title","id","data-custom-style"]]]].map((function(e){return"".concat(e[0],"[").concat(e[1].join("|"),"]")})).join(","),c=[{title:"Large centered",value:"image-center-large"},{title:"Center aligned",value:"image-center-medium"},{title:"Left aligned",value:"image-left-medium"},{title:"Right aligned",value:"image-right-medium"}],l={height:"25vh",plugins:a,skin_url:"/static/tinymce_skin",content_style:o,menubar:!1,branding:!1,toolbar:i,image_uploadtab:t,images_upload_handler:s,images_upload_credentials:!0,image_dimensions:!1,image_class_list:c,automatic_uploads:!0,contextmenu_never_use_native:!1,contextmenu:!1,paste_auto_cleanup_on_paste:!0,paste_remove_styles:!0,paste_remove_styles_if_webkit:!0,paste_strip_class_attributes:"all",media_dimensions:!1,extended_valid_elements:r,setup:function(e){t&&(m(e),u(e),f(e))}};return e&&(l.selector=e),l}},3158:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));n("ac1f"),n("841c"),n("1276"),n("d3b7"),n("159b"),n("498a");function o(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),o=0;o<n.length;o++){var a=n[o].trim();if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}function a(){var e=document.querySelector("meta[name=csrf-token]"),t=o("csrftoken"),n=void 0;return e?n=e.getAttribute("content"):t&&(n=t),n}},"67c4":function(e,t,n){"use strict";var o=n("ade3"),a=n("5530"),i=(n("caad"),n("bc3a")),r=n.n(i),c=n("3158"),l={"Content-Type":"application/json",Accept:"application/json"},s=Object(c["a"])();s&&(l["X-CSRF-Token"]=s);var d=r.a.create({headers:l});d.interceptors.request.use((function(e){var t=e.method.toUpperCase();return["PUT","DELETE","PATCH"].includes(t)&&(e.headers=Object(a["a"])(Object(a["a"])({},e.headers),{},Object(o["a"])({},"X-HTTP-Method-Override",t)),e.method="post"),e})),t["a"]=d},f872:function(e,t,n){"use strict";n.r(t),function(e){var t=n("b85c"),o=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("99af"),n("e562")),a=n.n(o),i=(n("0d68"),n("ec27"),n("4237"),n("84ec"),n("4ea8"),n("07d1"),n("64d8"),n("bc54"),n("3aea"),n("cfb0"),n("1123"));window.tinymce=a.a;var r=window.VERIFIED||window.SUP;function c(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="".concat(e.type,"#").concat(e.id),o=Object(i["a"])(n,r,t);return a.a.init(o)}var l,s=Object(t["a"])(document.querySelectorAll(".richtext-editor"));try{for(s.s();!(l=s.n()).done;){var d=l.value;c(d)}}catch(p){s.e(p)}finally{s.f()}var u,f=Object(t["a"])(document.querySelectorAll(".richtext-editor-src"));try{for(f.s();!(u=f.n()).done;){var m=u.value;c(m,!0)}}catch(p){f.e(p)}finally{f.f()}e.initRichTextEditor=c}.call(this,n("c8ba"))}});
//# sourceMappingURL=rich_text_editor.3fc72fd6.js.map